<template>
  <div class="call-back-btn">
    <transition name="fadeInCall">
      <button
        v-show="isVisible"
        class="call-back-btn__btn"
        @click="handleClick"
      >
        <svg
          width="44"
          height="45"
          viewBox="0 0 44 45"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle
            cx="22"
            cy="22.8047"
            r="22"
            fill="#82B56A"
          />
          <path
            d="M14.891 26.7583C17.2582 29.5879 20.1078 31.8159 23.3601 33.3923C24.5984 33.9792 26.2545 34.6754 28.0995 34.7947C28.2139 34.7997 28.3233 34.8047 28.4376 34.8047C29.6759 34.8047 30.6706 34.377 31.4812 33.4968C31.4861 33.4918 31.4961 33.4819 31.5011 33.4719C31.7895 33.1238 32.1177 32.8105 32.4609 32.4773C32.6946 32.2535 32.9333 32.0198 33.1621 31.7811C34.2213 30.677 34.2213 29.2746 33.1521 28.2054L30.1633 25.2166C29.656 24.6895 29.0493 24.411 28.4128 24.411C27.7762 24.411 27.1645 24.6895 26.6424 25.2116L24.862 26.992C24.6979 26.8975 24.5288 26.813 24.3697 26.7334C24.1708 26.6339 23.9868 26.5395 23.8226 26.435C22.2014 25.4056 20.7294 24.0629 19.322 22.3372C18.6109 21.4371 18.1335 20.6812 17.8003 19.9104C18.2677 19.4877 18.7054 19.0451 19.1281 18.6124C19.2773 18.4582 19.4314 18.3041 19.5856 18.1499C20.1227 17.6128 20.4111 16.9912 20.4111 16.3596C20.4111 15.728 20.1277 15.1064 19.5856 14.5693L18.1036 13.0873C17.9296 12.9133 17.7655 12.7442 17.5964 12.5701C17.2681 12.232 16.925 11.8838 16.5868 11.5705C16.0746 11.0683 15.4729 10.8047 14.8363 10.8047C14.2047 10.8047 13.598 11.0683 13.0659 11.5755L11.206 13.4354C10.5296 14.1118 10.1467 14.9323 10.0672 15.8822C9.97266 17.0707 10.1915 18.3339 10.7584 19.8606C11.6287 22.2228 12.9416 24.416 14.891 26.7583ZM11.2806 15.9866C11.3403 15.3252 11.5939 14.7732 12.0713 14.2958L13.9213 12.4458C14.2097 12.1673 14.528 12.0231 14.8363 12.0231C15.1397 12.0231 15.448 12.1673 15.7315 12.4557C16.0647 12.7641 16.378 13.0873 16.7161 13.4305C16.8852 13.6045 17.0593 13.7786 17.2333 13.9576L18.7153 15.4396C19.0236 15.7479 19.1828 16.0612 19.1828 16.3695C19.1828 16.6779 19.0236 16.9912 18.7153 17.2995C18.5611 17.4537 18.407 17.6128 18.2528 17.767C17.7903 18.2344 17.3577 18.677 16.8802 19.0998C16.8703 19.1097 16.8653 19.1147 16.8554 19.1246C16.4426 19.5374 16.5073 19.9303 16.6067 20.2286C16.6117 20.2436 16.6167 20.2535 16.6217 20.2684C17.0046 21.1884 17.5367 22.0637 18.3672 23.108C19.8591 24.9481 21.4306 26.3753 23.1612 27.4744C23.3751 27.6136 23.6038 27.723 23.8177 27.8325C24.0166 27.9319 24.2006 28.0264 24.3647 28.1308C24.3846 28.1408 24.3995 28.1507 24.4194 28.1607C24.5835 28.2452 24.7427 28.285 24.9018 28.285C25.2996 28.285 25.5582 28.0314 25.6428 27.9468L27.5027 26.0869C27.7911 25.7985 28.1045 25.6443 28.4128 25.6443C28.7907 25.6443 29.0991 25.878 29.293 26.0869L32.2918 29.0807C32.8885 29.6775 32.8836 30.324 32.2769 30.9555C32.068 31.1793 31.8492 31.3932 31.6154 31.617C31.2673 31.9551 30.9043 32.3032 30.5761 32.6961C30.0042 33.3128 29.3229 33.6012 28.4426 33.6012C28.3581 33.6012 28.2686 33.5962 28.184 33.5913C26.5529 33.4868 25.0361 32.8503 23.8972 32.3082C20.804 30.8113 18.0887 28.6878 15.8359 25.9924C13.981 23.7595 12.7327 21.6808 11.9072 19.4528C11.395 18.0853 11.201 16.9862 11.2806 15.9866Z"
            fill="#FCFCEE"
          />
        </svg>
      </button>
    </transition>
  </div>
</template>

<script>
import { mapMutations } from 'vuex';
export default {
  name: 'CallBackBtn',
  props: {
    isVisible: {
      type: Boolean,
      require: true,
      default: false,
    },
  },
  methods: {
    ...mapMutations({
      toggleModal: 'modals/toggleCallback',
      setIsCallBack: 'modals/setIsCallBack',
    }),
    handleClick() {
      this.toggleModal();
      this.setIsCallBack(true);
    },
  },
};
</script>

<style lang="scss" scoped>
.call-back-btn {
  position: fixed;
  bottom: 20%;
  right: 20px;
  z-index: 10;

  @media screen and (max-height: 430px) {
    bottom: 30%;
  }

  &__btn {
    position: relative;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    border: none;
    outline: none;
    background: rgba(130, 181, 106, 1);
    cursor: pointer;
    z-index: 5;

    &:hover,
    &:focus {
      svg {
        transform: scale(1.2);
      }
    }

    &::after {
      content: '';
      position: absolute;
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: rgba(130, 181, 106, 0.5);
      animation: bounce 5s ease infinite;
      z-index: 4;
    }

    svg {
      pointer-events: none;
      position: relative;
      z-index: 6;
      @include transition(transform);
    }
  }
}

.fadeInCall-enter-active,
.fadeInCall-leave-active {
  transition: opacity $animation-speed;
}
.fadeInCall-enter,
.fadeInCall-leave-to {
  opacity: 0;
}

@keyframes bounce {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.3);
  }
  100% {
    transform: scale(1);
  }
}
</style>
